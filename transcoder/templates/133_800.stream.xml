<?xml version="1.0" encoding="UTF-8"?>
<!-- Example template for transrate, producing four new streams at different bitrates. Resultant streams can be played back individually or as a group. source, 360p and 160p encode blocks are enabled through the Enable property, other examples are not enabled. Add additional encode blocks to your template as needed. --><Root version="1">
	<Transcode>
		<Description></Description>
		<PostProcess>
			<SortBuffer>
				<Enable>true</Enable>
				<!-- milliseconds -->
				<BufferSize>350</BufferSize>
				<FlushInterval>50</FlushInterval>
			</SortBuffer>
		</PostProcess>
		<Encodes>
			<!-- Example Encode block for source, not required unless Member of StreamNameGroup. -->
			<Encode>
				<Enable>true</Enable>
				<Name>source</Name>
				<StreamName>mp4:${SourceStreamName}_source</StreamName>
				<Video>
					<!-- H.263, H.264, H.265, VP8, VP9, PassThru, Disable -->
					<Codec>H.264</Codec>
					<Bitrate>3000000</Bitrate>
					<Parameters>
					</Parameters>
					<Implementation>NVENC</Implementation>
					<GPUID>-1</GPUID>
					<Profile>baseline</Profile>
					<KeyFrameInterval>
						<FollowSource>true</FollowSource>
						<Interval>0</Interval>
					</KeyFrameInterval>
					<FrameSize>
						<FitMode>fit-height</FitMode>
						<Width>0</Width>
						<Height>1080</Height>
						<Crop>0,0,0,0</Crop>
						<SourceRectangle></SourceRectangle>
					</FrameSize>
				</Video>
				<Audio>
					<!-- AAC, Vorbis, Opus, PassThru, Disable -->
					<Codec>PassThru</Codec>
					<Bitrate>${SourceAudioBitrate}</Bitrate>
					<Parameters>
					</Parameters>
				</Audio>
				<Properties>
				</Properties>
				<Description></Description>
			</Encode>
			<!-- Setup for 720p, high bandwith, main profile for desktop or set-top box -->
			<Encode>
				<Enable>true</Enable>
				<Name>720p</Name>
				<StreamName>mp4:${SourceStreamName}_720p</StreamName>
				<Video>
					<!-- H.263, H.264, H.265, VP8, VP9, PassThru, Disable -->
					<Codec>H.264</Codec>
					<!-- default, QuickSync, NVENC -->
					<Implementation>NVENC</Implementation>
					<GPUID>-1</GPUID>
					<FrameSize>
						<!-- letterbox, fit-width, fit-height, crop, stretch, match-source -->
						<FitMode>fit-height</FitMode>
						<Width>1280</Width>
						<Height>720</Height>
						<!-- <Crop>0,0,0,0</Crop> -->
						<!-- <SourceRectangle>0,0,320,240</SourceRectangle> -->
						<Crop>0,0,0,0</Crop>
						<SourceRectangle></SourceRectangle>
					</FrameSize>
					<!-- baseline, main, high -->
					<Profile>baseline</Profile>
					<Bitrate>2000000</Bitrate>
					<KeyFrameInterval>
						<FollowSource>true</FollowSource>
						<Interval>0</Interval>
					</KeyFrameInterval>
					<Overlays>
						<Overlay>
							<Enable>false</Enable>
							<Name>WowzaLogo</Name>
							<Index>0</Index>
							<ImagePath>${com.wowza.wms.context.VHostConfigHome}/content/wowzalogo.png</ImagePath>
							<CheckForUpdates>false</CheckForUpdates>
							<Opacity>100</Opacity>
							<Location>
								<X>4</X>
								<Y>4</Y>
								<Width>${ImageWidth}</Width>
								<Height>${ImageHeight}</Height>
								<!-- horiz: left, right, hcenter - vert: top, bottom, vcenter -->
								<Align>left,top</Align>
							</Location>
							<Description></Description>
						</Overlay>
					</Overlays>
					<Parameters>
					</Parameters>
				</Video>
				<Audio>
					<!-- AAC, Vorbis, Opus, PassThru, Disable -->
					<Codec>PassThru</Codec>
					<Bitrate>${SourceAudioBitrate}</Bitrate>
					<Parameters>
					</Parameters>
				</Audio>
				<Properties>
				</Properties>
				<Description></Description>
			</Encode>
			<!-- Setup for 360p, high bandwith, main profile for desktop -->
			<!-- Setup for 240p, medium bandwidth, baseline profile -->
			<!-- Setup for 160p, low bandwith, baseline profile for 3G mobile devices such as iOS, Android, Blackberry -->
			<Encode>
				<Name>480p</Name>
				<Enable>true</Enable>
				<Description>480p</Description>
				<StreamName>mp4:${SourceStreamName}_480p</StreamName>
				<Video>
					<Codec>H.264</Codec>
					<Implementation>NVENC</Implementation>
					<GPUID>-1</GPUID>
					<Profile>baseline</Profile>
					<Bitrate>1000000</Bitrate>
					<KeyFrameInterval>
						<FollowSource>true</FollowSource>
						<Interval>0</Interval>
					</KeyFrameInterval>
					<FrameSize>
						<FitMode>fit-height</FitMode>
						<Width>0</Width>
						<Height>480</Height>
						<Crop>0,0,0,0</Crop>
						<SourceRectangle></SourceRectangle>
					</FrameSize>
				</Video>
				<Audio>
					<Codec>PassThru</Codec>
					<Bitrate>${SourceAudioBitrate}</Bitrate>
				</Audio>
			</Encode>
		</Encodes>
		<Decode>
			<Video>
				<!-- default, QuickSync, CUDA, NVCUVID -->
				<Implementation>CUDA</Implementation>
				<Deinterlace>true</Deinterlace>
				<Overlays>
					<Overlay>
						<Enable>false</Enable>
						<Name>WowzaLogo</Name>
						<Index>0</Index>
						<ImagePath>${com.wowza.wms.context.VHostConfigHome}/content/wowzalogo.png</ImagePath>
						<CheckForUpdates>false</CheckForUpdates>
						<Opacity>100</Opacity>
						<Location>
							<X>4</X>
							<Y>4</Y>
							<Width>${ImageWidth}</Width>
							<Height>${ImageHeight}</Height>
							<!-- horiz: left, right, hcenter - vert: top, bottom, vcenter -->
							<Align>left,top</Align>
						</Location>
						<Description></Description>
					</Overlay>
					<Overlay>
						<Name>logo</Name>
						<Description></Description>
						<Enable>true</Enable>
						<ImagePath>${com.wowza.wms.context.VHostConfigHome}/content/light.png</ImagePath>
						<Index>1</Index>
						<CheckForUpdates>true</CheckForUpdates>
						<Opacity>100</Opacity>
						<Location>
							<X>770</X>
							<Y>310</Y>
							<Width>320</Width>
							<Height>76</Height>
							<Align>hcenter,top</Align>
						</Location>
					</Overlay>
				</Overlays>
				<Parameters>
				</Parameters>
			</Video>
			<Audio>
				<Parameters>
				</Parameters>
			</Audio>
			<Properties>
			</Properties>
		</Decode>
		<Scale>
			<!-- default, CUDA -->
			<Implementation>CUDA</Implementation>
			<Parameters>
			</Parameters>
			<Properties>
			</Properties>
		</Scale>
		<StreamNameGroups>
			<!-- Note: Play stream using stream name ngrp:[stream-name] -->
			<StreamNameGroup>
				<Name>all</Name>
				<StreamName>${SourceStreamName}_all</StreamName>
				<Members>
					<Member>
						<MemberName>source</MemberName>
						<EncodeName>source</EncodeName>
					</Member>
					<Member>
						<MemberName>720p</MemberName>
						<EncodeName>720p</EncodeName>
					</Member>
					<Member>
						<MemberName>360p</MemberName>
						<EncodeName>360p</EncodeName>
					</Member>
					<Member>
						<MemberName>240p</MemberName>
						<EncodeName>240p</EncodeName>
					</Member>
					<Member>
						<MemberName>160p</MemberName>
						<EncodeName>160p</EncodeName>
					</Member>
				</Members>
			</StreamNameGroup>
			<StreamNameGroup>
				<Name>mobile</Name>
				<StreamName>${SourceStreamName}_mobile</StreamName>
				<Members>
					<Member>
						<MemberName>240p</MemberName>
						<EncodeName>240p</EncodeName>
					</Member>
					<Member>
						<MemberName>160p</MemberName>
						<EncodeName>160p</EncodeName>
					</Member>
				</Members>
			</StreamNameGroup>
		</StreamNameGroups>
		<Properties>
		</Properties>
	</Transcode>
</Root>
